<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Interactive Instrument Page</title>
</head>

<body>
<div id="noteContainer"></div>


<div class="container">
  <div class="left-panel">
    <div class="tabs">
      <div class="tab-buttons">
        <button class="active" onclick="showTab('overview')">Overview</button>
      </div>

      <div id="overview" class="tab-content">
        <p>
          The piano is a stringed keyboard instrument invented in the early 1700s. 
          It produces sound by hammers striking strings when keys are pressed, 
          combining both percussion and string characteristics.
        </p>
        <img src="https://upload.wikimedia.org/wikipedia/commons/6/6a/Grand_piano2.jpg" 
             alt="Grand piano overview" />
      </div>
    </div>

    <div id="spotifyEmbedContainer">
      <iframe
        src="https://open.spotify.com/embed/track/1I5OFCYZMqcHcAbLeH46Ew?utm_source=generator" 
        width="100%" frameborder="0" 
        allowfullscreen="" 
        allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" 
        loading="lazy">
      </iframe>
    </div>

    <button id="listenBtn">Hear What I Sound Like</button>
    <button id="tryAnotherBtn">Try Another Instrument</button>
  </div>

  <!-- Right panel removed -->
  <div class="right-panel"></div>
</div>


<script>
  function showTab(tabId) {
    const contents = document.querySelectorAll('.tab-content');
    contents.forEach(content => content.style.display = 'none');

    const buttons = document.querySelectorAll('.tab-buttons button');
    buttons.forEach(btn => btn.classList.remove('active'));

    document.getElementById(tabId).style.display = 'block';

    const clickedButton = Array.from(buttons).find(btn => 
      btn.getAttribute('onclick')?.includes(tabId)
    );
    if (clickedButton) clickedButton.classList.add('active');
  }

  document.getElementById('tryAnotherBtn').addEventListener('click', () => {
    window.location.href = '/recognition';
  });

  document.getElementById('listenBtn').addEventListener('click', () => {
    const container = document.getElementById('spotifyEmbedContainer');
    container.style.display = 'block';
    container.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
  });
const listenBtn = document.getElementById('listenBtn');

listenBtn.addEventListener('click', () => {
    const container = document.getElementById('spotifyEmbedContainer');
    container.style.display = 'block';
    container.scrollIntoView({ behavior: 'smooth', block: 'nearest' });

    const noteContainer = document.getElementById('noteContainer');

    // create a note every 300ms
    const spawnNotes = setInterval(() => {
        const note = document.createElement('div');
        note.className = 'note';
        const symbols = ['&#9835;', '&#9833;', '&#9839;', '&#119070;', '&#9834;'];
        note.innerHTML = symbols[Math.floor(Math.random() * symbols.length)];
        note.style.top = Math.random() * 80 + '%'; // random vertical position
        noteContainer.appendChild(note);

        // remove after animation ends (6s or match your CSS duration)
        setTimeout(() => note.remove(), 9000); 
    }, 300);

    // stop spawning after 15 seconds
    setTimeout(() => clearInterval(spawnNotes), 10000);
});


</script>

</body>
</html>
